"""
directories -> skip malformed data -> registered stacks in same dirs
-necessary to automatically screen for trials with drift / loss of signal? (do ~here if so)

registered stacks -> smooth+dF/F
                     need info about stimulus, possibly including trigger, to group stack into trials

                    -> average across trials within fly -> reject under threshold
                                                                        for broad odor activation
                                    -> images via some projection
                                       (as directory -> (odor -> image))
                                       -will then have to have a plotting function that deals 
                                        with this, which would probably be less general
                                       -or another function that processes this dict
                                        into one by (fly_id -> (glom -> (odor -> image)))

                                       -> ROI (as directory -> (glom -> OpenCV roi))
                                          (not all images used to make ROIs)
                                       -> burn in scale bar from metadata (optionally)

                        "" +ROIs -> reject bad ROIs (make GUI to speed this up? / prompt user)
                                    + save which ROIs were rejected, recompute if code changes

                                    -> individual traces (in data frame) binned in ROIs
                                         in: ROIs, stacks from same directory (maybe ranges
                                             of frames from within session at a time?), stimuli
                                             corresponding to the whole session or ranges of 
                                             frames currently being processed
                                         out:
                                           (multiindexed dataframe, w/ first index as fly_id 
                                           (derived from directory), and sessions (actual 
                                            directories) as further index)
                                       -maybe add fly_id and session # upon return? or pass in?
                                        in general sessions should be able to have multiple ROIs,
                                        though in my latest experiments, i am aiming for one glom
                                        per session

dataframe -> group by rearing condition, glomerulus, and stimuli (???)

plots i want:
    -fly summaries:
        -grid for each glomerulus, w/ max projection of avg for each odor
        -ROIs for each glomerulus (private odors now only exist in sessions w/ suffix of that
         glomerulus)
        -individual traces
        -mean + confidence intervals
    -averages across flies for each, separate for mock and 2-butanone reared 
     (glomeruli, stimulus) mean + confidence intervals
        -one grid per each glomerulus (row w/ private, another row w/ private + PA)
        -(?) fit slope / sigmoid & summarize w/ 1 number per glomerulus, for private and
         private + PA
            -include mock on private series, and include PA on priv + PA row
"""

"""
plotting functions i want:
    -make a grid of images for each terminal dictionary, and title the grids with
     keys of any containing dictionaries
        -can use for ROIs and projections
    -wrapper around facetgrid stuff?
       -sem or bootstrapping
       -individual traces
"""
